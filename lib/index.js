"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t.apply(this,arguments)};function e(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))}function n(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function r(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");e===document.cookie.match(n)&&unescape(e[2])}function o(t,e,n){void 0===e&&(e="yyyy-mm-dd hh:ii:ss"),void 0===n&&(n=[7,1,2,3,4,5,6]);var r={"m+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"i+":t.getMinutes(),"s+":t.getSeconds(),Q:Math.floor((t.getMonth()+3)/3),S:"".concat(t.getMilliseconds()).padStart(3,"0"),W:n[t.getDay()]};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,"".concat(t.getFullYear()).substr(4-RegExp.$1.length))),r)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[o]:"00".concat(r[o]).substr("".concat(r[o]).length)));return e}function i(){var t=new Date;return"".concat((100*Math.random()).toFixed().padEnd(2,"0")).concat(t.getSeconds().toString().padStart(2,"0")).concat(t.getMinutes().toString().padStart(2,"0")).concat(t.getHours().toString().padStart(2,"0")).concat(t.getDate().toString().padStart(2,"0")).concat(String(t.getMonth()+1).padStart(2,"0")).concat(t.getFullYear())}function a(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function c(t){return void 0===t&&(t=8),(Math.random()*Number("1".padEnd(t+1,"0"))).toFixed().slice(0,t)}function u(t,e){return"+"==e?/(^[1-9]\d*$)|(^0$)/.test(t):"-"==e?/(^\-0$)|(^\-[1-9]\d*$)/.test(t):/(^[1-9]\d*$)|(^0$)|(^\-0$)|(^\-[1-9]\d*$)/.test(t)}function s(t,e,n){return void 0===n&&(n=!1),"+"==e?(n?/(^0\.[1-9]*\d*[1-9]$)|(^[1-9]\d*\.\d*[1-9]$)/:/(^0\.\d+$)|(^[1-9]\d*\.\d+$)/).test(t):"-"==e?(n?/(^\-0\.[1-9]*\d*[1-9]$)|(^\-[1-9]\d*\.\d*[1-9]$)/:/(^\-0\.\d+$)|(^\-[1-9]\d*\.\d+$)/).test(t):n?/(^0\.[1-9]*\d*[1-9]$)|(^[1-9]\d*\.\d*[1-9]$)|(^\-0\.[1-9]*\d*[1-9]$)|(^\-[1-9]\d*\.\d*[1-9]$)/.test(t):/(^0\.\d+$)|(^[1-9]\d*\.\d+$)|(^\-0\.\d+$)|(^\-[1-9]\d*\.\d+$)/.test(t)}function l(t){return new Promise((function(e){return setTimeout(e,t)}))}exports.add=function(t,e){var n,r=0,o=0;try{r=t.toString().split(".")[1].length}catch(t){}try{o=e.toString().split(".")[1].length}catch(t){}return(t*(n=Math.pow(10,Math.max(r,o)))+e*n)/n},exports.all=function(t,e){return Promise.all(t).catch((function(t){return e&&e(t)}))},exports.any=function(t,e){return Promise.any(t).catch((function(t){return e&&e(t)}))},exports.arraySet=function(t){return Array.isArray(t)?1==t.length?t:function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(new Set(t)),!1):t},exports.base64Decode=function(t){return Buffer.from(t,"base64").toString("utf8")},exports.base64Encode=function(t,e){void 0===e&&(e=!1);var n=Buffer.from(t,"utf-8").toString("base64");return e?n.replace(/\+\//g,"-_").replace(/=/g,""):n},exports.catchPromise=function(t,e){return new Promise(t).catch((function(t){return e&&e(t)}))},exports.copyContent=function(t,e){void 0===e&&(e=null);var n=t.innerText?t.innerText:t.value,r=document.createElement("input"),o="复制成功！";r.style.position="absolute",r.style.top="-5201314px",r.style.left="-5201314px",r.value=n,r.value+=null===e?"":e,document.body.appendChild(r),t.blur(),r.select();try{document.execCommand("copy")}catch(t){o="浏览器不支持此操作，请手动复制。"}return document.body.removeChild(r),console.log(o),n},exports.copyToClipboard=function(t){navigator.clipboard&&navigator.clipboard.writeText(t)},exports.curryIt=function(t){var e=t.length,n=[];return function(r){return n.push(r),--e<=0?t.apply(this,n):arguments.callee}},exports.data2Arr=function(t,e){var n,r=[];if(0===t.length)return r;for(var o in t)(null===(n=t[o])||void 0===n?void 0:n[e])&&r.push(t[o][e]);return r},exports.data2Obj=function(t,e,n){var r={};return Array.isArray(t)?(t.forEach((function(t){r[t[e]]=n?t[n]:t})),r):r},exports.debounce=function(t,e){void 0===e&&(e=1e3);var n=null;return function(){clearTimeout(n),n=setTimeout((function(){t.apply(this,arguments)}),e)}},exports.deepClone=function t(e,n){if(void 0===n&&(n=new WeakMap),n.has(e))return e;var r=null;if([Date,RegExp,Set,WeakSet,Map,WeakMap,Error].includes(null==e?void 0:e.constructor))r=new e.constructor(e);else if(Array.isArray(e))r=[],e.forEach((function(e,n){r[n]=t(e)}));else if("object"==typeof e&&null!==e)for(var o in n.set(e,"exist"),r={},e)Object.hasOwnProperty.call(e,o)&&(r[o]=t(e[o],n));else r=e;return r},exports.div=function(t,e){var n=0,r=0,o=t.toString(),i=e.toString();try{n=o.split(".")[1].length}catch(t){}try{r=i.split(".")[1].length}catch(t){}return Number(o.replace(".",""))/Number(i.replace(".",""))*Math.pow(10,r-n)},exports.empty=function(t){return"boolean"!=typeof t&&("null"===t||("undefined"===t||(!t&&0!==t||(!(!Array.isArray(t)||0!==t.length)||"[object Object]"===Object.prototype.toString.call(t)&&0===Object.keys(t).length))))},exports.findChildren=function(t){for(var e=t.childNodes,n=[],r=e.length,o=0;o<r;o++)1===e[o].nodeType&&n.push(e[o]);return n},exports.findParents=function(t,e){for(;t&&e;)t=t.parentElement?t.parentElement:t.parentNode,e--;return t},exports.formatBytes=function(t,e){var n;void 0===e&&(e=2);var r=["B","KB","MB","GB","TB"],o=Math.floor((t?Math.log(t):0)/Math.log(1024));o=Math.min(o,r.length-1);var i=null!==(n=null==r?void 0:r[o])&&void 0!==n?n:r[0];return(t/=1<<10*o).toFixed(e)+" "+i},exports.formatDate=o,exports.formatFormData=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new FormData;return Object.keys(t).forEach((function(o){if(Array.isArray(t[o]))for(var i in t[o])e?r.append(n?"".concat(o,"[]"):"".concat(o,"[").concat(i,"]"),t[o][i]):r.append(o,t[o][i]);else r.append(o,"object"==a(t[o])?JSON.stringify(t[o]):t[o])})),r},exports.formatURLSearchParams=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new URLSearchParams;return Object.keys(t).forEach((function(o){if(Array.isArray(t[o]))for(var i in t[o])e?r.append(n?"".concat(o,"[]"):"".concat(o,"[").concat(i,"]"),t[o][i]):r.append(o,t[o][i]);else r.append(o,"object"==a(t[o])?JSON.stringify(t[o]):t[o])})),r},exports.get1Var=function(t){if("object"!==a(t)&&!Array.isArray(t))return t;for(var e in t){return t[e]}},exports.getBaseURL=function(t){return t.replace(/[?#].*$/,"")},exports.getCookie=r,exports.getMonthDays=function(t){var e=new Date(t),n=e.getMonth();return e.setMonth(n+1),e.setDate(0),e.getDate()},exports.getRandColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},exports.getRandNum=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=10),Math.floor(t+Math.random()*(e-t+1))},exports.getRandStr=c,exports.getStyleByName=function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]},exports.getTimeAndStr=function(t,e){return void 0===t&&(t=5),void 0===e&&(e=36),0===t?"".concat(i()):Number("".concat(c(t)).concat(Date.now())).toString(e)},exports.getTimeCode=i,exports.getType=a,exports.getUUID=function(t,e){e=e||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n="",r=t=t||8;r>0;--r)n+=e[Math.floor(Math.random()*e.length)];return n},exports.getV=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.length>=2?e.reduce((function(e,n){return e&&e.hasOwnProperty(n)?e[n]:t})):t},exports.getViewportSize=function(){return window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:"BackCompat"===document.compatMode?{w:document.body.clientWidth,h:document.body.clientHeight}:{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}},exports.globalError=function(t){window.onerror=function(e,n,r,o,i){return t.call(this,e,n,r,o,i),!0}},exports.html2str=function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent},exports.initNotification=function(){var t=window.Notification||(null===window||void 0===window?void 0:window.mozNotification)||(null===window||void 0===window?void 0:window.webkitNotification);return!!t&&("default"!==t.permission&&"denied"!==t.permission&&"undefined"!==t.permission||Notification.requestPermission().then((function(t){return"denied"!==t&&("granted"===t||void 0)})),!0)},exports.insertAfter=function(t,e){var n=e.parentNode;n.lastElementChild===e?n.appendChild(t):n.insertBefore(t,e.nextElementSibling)},exports.isAppleDevice=function(){return/Mac|iPod|iPhone|iPad/.test(navigator.platform)},exports.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},exports.isDarkMode=function(){return window.matchMedia&&(window.matchMedia("(prefers-color-scheme:dark)").matches||window.matchMedia("(prefers-color-scheme: dark)").matches)},exports.isDecimal=s,exports.isInteger=u,exports.isNode=function(){return"undefined"!=typeof process&&!!process.versions&&!!process.versions.node},exports.isValidJSON=function(t){try{return JSON.parse(t),!0}catch(t){return!1}},exports.isWeekday=function(t){return t.getDay()%6!=0},exports.localStorageGet=function(t){var e=window.localStorage.getItem(t);switch(a(e)){case"object":case"array":return JSON.parse(e);case"string":return s(e)||u(e)?parseFloat(e):"true"===e||"false"===e?"true"===e:e;default:return e}},exports.localStorageSet=function(t,e){var n;switch(a(e)){case"null":case"undefined":return void window.localStorage.removeItem(t);case"object":case"array":n=JSON.stringify(e);break;default:n=e}window.localStorage.setItem(t,n)},exports.mergeObj=function t(e,n,r,o){for(var i in void 0===o&&(o=!1),n)"object"===a(n[i])&&a("object"===e[i])?e[i]=t(e[i],n[i],r):Object.keys(e).includes(i)&&!(null==r?void 0:r.includes(i))||(e[i]=n[i]);if(o)for(var c in e)void 0===n[c]&&delete e[c];return e},exports.offDefaultEvent=function(t){var e=t||window.event;return e&&(e.preventDefault(),e.stopPropagation()),!1},exports.qsParse=function(t,e){var n=null!=t?t:window.location.pathname;t=null!=t?t:window.location.search;var r=n.substring(n.lastIndexOf("/")+1),o={"/":null!=r?r:void 0},i=0===t.indexOf("?")?t.substring(1):t;if(0!==i.length)for(var a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("="),s=decodeURIComponent(u[0]),l=decodeURIComponent(u[1]);o[s]?(!Array.isArray(o[s])&&(o[s]=Array(o[s])),o[s].push(l)):o[s]=l}return e?null==o?void 0:o[e]:o},exports.qsStringify=function(t,e){if(!t)return"";var n=new URLSearchParams;return Object.keys(t).forEach((function(r){var o=t[r];switch(a(o)){case"object":Object.keys(o).forEach((function(t){n.append("".concat(r,"[").concat(t,"]"),"object"==a(o[t])?JSON.stringify(o[t]):o[t])}));break;case"array":(null==e?void 0:e.arr2str)?n.append(r,o.join(",")):o.filter(Boolean).forEach((function(t,o){var i="object"==a(t)?JSON.stringify(t):t;(null==e?void 0:e.hasBrackets)?n.append((null==e?void 0:e.hasIndex)?"".concat(r,"[").concat(o,"]"):"".concat(r,"[]"),i):n.append(r,i)}));break;default:n.append(r,o)}})),(null==e?void 0:e.urlEncode)?n.toString():decodeURIComponent(n.toString())},exports.removeCookie=function(t){var e=new Date;e.setTime(e.getTime()-1);var n=r(t);null!==n&&(document.cookie=t+"="+n+";expires="+e.toUTCString()+";path=/")},exports.retry=function t(r,o,i){var a=this;return void 0===o&&(o=0),void 0===i&&(i=0),new Promise((function(c,u){r.then((function(t){c(t)})).catch((function(s){return e(a,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return o>0?[4,l(i)]:[3,2];case 1:return e.sent(),--o,c(t(r,o,i)),[3,3];case 2:u("重试结束"),e.label=3;case 3:return[2]}}))}))}))}))},exports.round=function(t,e){var n=t+"";if(0==(e=e||0))return Math.round(t);if(-1===n.indexOf(".")&&(n+="."),n+=new Array(e+1).join("0"),new RegExp("^(-|\\+)?(\\d+(\\.\\d{0,"+(e+1)+"})?)\\d*$").test(n)){var r="0"+RegExp.$2,o=RegExp.$1,i=RegExp.$3.length,a=!0;if(i==e+1+1){var c=(i=r.match(/\d/g)).length;if(parseInt(i[c-1])>4)for(var u=c-2;u>=0&&(i[u]=parseInt(i[u])+1,10==i[u]);u--)i[u]=0,a=1!=u;r=i.join("").replace(new RegExp("(\\d+)(\\d{"+e+"})\\d$"),"$1.$2")}return a&&(r=r.substr(1)),parseFloat((o+r).replace(/\.$/,""))}},exports.scrollToBottom=function(t){var e=document.querySelector(t);e&&(e.scrollTop=e.scrollHeight)},exports.scrollToTop=function(t,e){void 0===e&&(e="start");var n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:e})},exports.sendNotification=function(e,n,r){var o,i,a,u,s,l;if(window.Notification||(null===window||void 0===window?void 0:window.mozNotification)||(null===window||void 0===window?void 0:window.webkitNotification)){var d=new Notification(null!=n?n:"js-xxx Notification",t(t({},r),{dir:null!==(o=null==r?void 0:r.dir)&&void 0!==o?o:"auto",lang:null!==(i=null==r?void 0:r.lang)&&void 0!==i?i:"zh-CN",requireInteraction:null!==(a=null==r?void 0:r.requireInteraction)&&void 0!==a&&a,tag:null!==(u=null==r?void 0:r.tag)&&void 0!==u?u:c(8),icon:null!==(s=null==r?void 0:r.icon)&&void 0!==s?s:"favicon.ico",timestamp:null!==(l=null==r?void 0:r.timestamp)&&void 0!==l?l:(new Date).getTime(),body:e}));d.onclick=function(){var t;window.focus(),null===(t=null==r?void 0:r.onClick)||void 0===t||t.call(this),d.close()},d.onerror=function(){var t;null===(t=null==r?void 0:r.onError)||void 0===t||t.call(this)},d.onclose=function(){var t;null===(t=null==r?void 0:r.onClose)||void 0===t||t.call(this)}}else console.log("系统不支持 Notification API")},exports.sessionStorageGet=function(t){var e=window.sessionStorage.getItem(t);switch(a(e)){case"object":case"array":return JSON.parse(e);case"string":return s(e)||u(e)?parseFloat(e):"true"===e||"false"===e?"true"===e:e;default:return e}},exports.sessionStorageSet=function(t,e){var n;switch(a(e)){case"null":case"undefined":return void window.sessionStorage.removeItem(t);case"object":case"array":n=JSON.stringify(e);break;default:n=e}window.sessionStorage.setItem(t,n)},exports.setCookie=function(t,e,n){n=n||30;var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),document.cookie=t+"="+escape(e)+";expires="+r.toUTCString()+";path=/"},exports.setIcon=function(t){var e,n=document.querySelector('head [rel="icon"]');if(n)n.setAttribute("href",t),n.setAttribute("rel","icon");else{var r=document.createElement("link");r.setAttribute("rel","icon"),r.setAttribute("href",t),null===(e=document.querySelector("head"))||void 0===e||e.appendChild(r)}},exports.shuffleArray=function(t){return t.sort((function(){return Math.random()-.5}))},exports.sleep=l,exports.sortCallBack=function(t,e){return void 0===e&&(e=!0),function(n,r){return n[t]>r[t]?e?1:-1:e?-1:1}},exports.str2html=function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML},exports.str2unicode=function(t){return unescape(t.replace(/\\u/gi,"%u"))},exports.sub=function(t,e){var n,r=0,o=0;try{r=t.toString().split(".")[1].length}catch(t){}try{o=e.toString().split(".")[1].length}catch(t){}return n=Math.pow(10,Math.max(r,o)),parseFloat("".concat((t*n-e*n)/n))},exports.throttle=function(t,e){void 0===e&&(e=2e3);var n=!0;return function(){n&&(n=!1,t.apply(this,arguments),setTimeout((function(){n=!0}),e))}},exports.timeSince=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n="yyyy-mm-dd hh:ii:ss"),t){t.replace(/-/g,"/");var r=new Date(t).getTime(),i=Math.floor(((new Date).getTime()-r)/1e3),a=Math.floor(i/86400);if(e){if((a=Math.floor(i/2592e3))>=4)return o(new Date(r),n);if(a>=1)return a+" 月前";if((a=Math.floor(i/604800))>=1)return a+" 周前"}return a>=8?o(new Date(r),n):(a=Math.floor(i/86400))>=1?a+" 天前":(a=Math.floor(i/3600))>=1?a+" 小时前":(a=Math.floor(i/60))>=1?a+" 分钟前":"刚刚"}},exports.times=function(t,e){var n=0,r=t.toString(),o=e.toString();try{n+=r.split(".")[1].length}catch(t){}try{n+=o.split(".")[1].length}catch(t){}return Number(r.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)},exports.to=function(t,e,n){return t.then((function(t){return e&&e(t),t})).catch((function(t){n&&n(t),console.log(t)}))},exports.trim=function(t,e){switch(void 0===e&&(e=0),e){case 0:case"ba":return t.trim();case 1:case"b":return t.replace(/^[\s]*/,"");case 2:case"a":return t.replace(/[\s]*$/g,"");case 3:case"all":return t.replace(/\s/g,"");case 4:case"pro":return t.replace(/(^\s*)|(\s*$)|\s(?=\s)/g,"");default:return t}},exports.unicode2str=function(t){return escape(t).toLocaleLowerCase().replace(/%u/gi,"\\u")};
